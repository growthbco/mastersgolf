---
import Layout from '../layouts/Layout.astro';
import CartCard from '../components/CartCard.astro';
import inventoryData from '../data/inventory.json';
---

<Layout title="Golf Cart Inventory - Masters Golf Cars" description="Browse our selection of new and used golf carts for sale in Central Florida">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
	<script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	<div id="inventory-page" class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
		<div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
			
			<!-- Filters Sidebar -->
			<aside id="filters-sidebar" class="lg:col-span-1">
				<div class="space-y-6">
					<div id="filter-header">
						<h1 class="text-3xl font-bold text-gray-900">Inventory Filter</h1>
						<p class="text-lg text-gray-600">Selection</p>
					</div>
					
					<!-- Keyword Filter -->
					<div id="filter-keyword" class="border-b pb-6">
						<button class="w-full flex justify-between items-center text-left py-2" onclick="toggleFilter('keyword-content')">
							<h3 class="text-lg font-semibold text-gray-900">Keyword Or Stock #</h3>
							<i id="keyword-toggle-icon" class="fa-solid fa-chevron-up text-gray-500"></i>
						</button>
						<div id="keyword-content" class="mt-4">
							<div class="flex">
								<input type="text" placeholder="Keyword Or Stock #" class="flex-grow border border-gray-300 rounded-l-md px-4 py-2 focus:ring-brand-green focus:border-brand-green outline-none">
								<button class="bg-gray-900 text-white px-4 py-2 rounded-r-md hover:bg-gray-800">
									<i class="fa-solid fa-search"></i>
								</button>
							</div>
						</div>
					</div>
					
					<!-- Brand/Model Filter -->
					<div id="filter-brand" class="border-b pb-6">
						<button class="w-full flex justify-between items-center text-left py-2" onclick="toggleFilter('brand-content')">
							<h3 class="text-lg font-semibold text-gray-900">Brand/Model</h3>
							<i id="brand-toggle-icon" class="fa-solid fa-chevron-up text-gray-500"></i>
						</button>
						<div id="brand-content" class="mt-4 space-y-3">
							<div class="flex justify-between items-center text-gray-600">
								<a href="#" class="hover:text-brand-green">Any</a>
								<span class="bg-gray-200 text-gray-700 text-xs font-semibold px-2 py-1 rounded-full">{inventoryData.length}</span>
							</div>
							<div class="flex justify-between items-center text-brand-green font-semibold">
								<a href="#" class="flex items-center">
									<i class="fa-solid fa-chevron-down mr-2 text-xs"></i>
									Advanced EV
								</a>
								<span class="bg-gray-200 text-gray-700 text-xs font-semibold px-2 py-1 rounded-full">{inventoryData.length}</span>
							</div>
						</div>
					</div>
					
					<!-- Price Filter -->
					<div id="filter-price" class="border-b pb-6">
						<button class="w-full flex justify-between items-center text-left py-2" onclick="toggleFilter('price-content')">
							<h3 class="text-lg font-semibold text-gray-900">Price</h3>
							<i id="price-toggle-icon" class="fa-solid fa-chevron-up text-gray-500"></i>
						</button>
						<div id="price-content" class="mt-4">
							<div class="flex items-center space-x-2">
								<input type="text" placeholder="Min" class="w-full border border-gray-300 rounded-md px-4 py-2 text-center focus:ring-brand-green focus:border-brand-green outline-none">
								<span class="text-gray-500">TO</span>
								<input type="text" placeholder="Max" class="w-full border border-gray-300 rounded-md px-4 py-2 text-center focus:ring-brand-green focus:border-brand-green outline-none">
							</div>
						</div>
					</div>
					
					<!-- Update Button -->
					<div id="filter-update-button">
						<button class="w-full bg-gray-900 text-white font-bold py-3 px-4 rounded-md hover:bg-gray-800 transition-colors">
							UPDATE
						</button>
					</div>
				</div>
			</aside>
			
			<!-- Product Grid -->
			<main id="product-grid-section" class="lg:col-span-3">
				<div id="grid-controls" class="flex justify-between items-center mb-4 pb-4 border-b">
					<div class="flex items-center space-x-2">
						<label for="sort-by" class="text-gray-600">Sort By</label>
						<select id="sort-by" class="border border-gray-300 rounded-md px-3 py-2 focus:ring-brand-green focus:border-brand-green outline-none">
							<option>-- Any --</option>
							<option>Price: Low to High</option>
							<option>Price: High to Low</option>
							<option>Newest</option>
						</select>
					</div>
					<p class="text-gray-600">Displaying 1 - {inventoryData.length} of {inventoryData.length}</p>
				</div>
				
				<div id="grid-header" class="bg-gray-900 text-white text-xl font-bold p-4 mb-6">
					<h2>Golf Cart</h2>
				</div>
				
				<div id="product-list" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
					{inventoryData.map((cart) => (
						<div class="border border-gray-200 rounded-lg overflow-hidden flex flex-col">
							<div class="h-64 overflow-hidden">
								<img class="w-full h-full object-cover" src={cart.image} alt={cart.name} />
							</div>
							<div class="p-4 flex flex-col flex-grow">
								<h4 class="font-bold text-lg text-gray-900 flex-grow">{cart.name}</h4>
								<div class="text-center my-4">
									<p class="text-gray-600">Sale Price <span class="font-bold text-gray-900">${(cart.salePrice || cart.price).toLocaleString()}</span></p>
									<p class="text-gray-600">Stock # <span class="font-bold text-gray-900">{cart.stock}</span></p>
								</div>
								<div class="space-y-2 mt-auto">
									<a href={`mailto:info@mastersgolfcars.com?subject=Inquiry about Stock #${cart.stock}`} class="w-full bg-gray-900 text-white font-semibold py-3 px-4 rounded-md hover:bg-gray-800 transition-colors flex items-center justify-center space-x-2">
										<i class="fa-regular fa-envelope"></i>
										<span>SEND EMAIL</span>
									</a>
									<a href={`/cart/${cart.id}`} class="w-full bg-white text-gray-900 font-semibold py-3 px-4 rounded-md border-2 border-brand-green hover:bg-green-50 transition-colors flex items-center justify-center space-x-2">
										<i class="fa-regular fa-eye"></i>
										<span>VIEW DETAILS</span>
									</a>
								</div>
							</div>
						</div>
					))}
				</div>
			</main>
		</div>
	</div>

	<script>
		function toggleFilter(contentId) {
			const content = document.getElementById(contentId);
			const iconId = contentId.split('-')[0] + '-toggle-icon';
			const icon = document.getElementById(iconId);
			
			if (content.style.display === 'none' || content.style.display === '') {
				content.style.display = 'block';
				icon.classList.remove('fa-chevron-down');
				icon.classList.add('fa-chevron-up');
			} else {
				content.style.display = 'none';
				icon.classList.remove('fa-chevron-up');
				icon.classList.add('fa-chevron-down');
			}
		}

		// Initially set the filters to be open
		document.addEventListener('DOMContentLoaded', function() {
			document.getElementById('keyword-content').style.display = 'block';
			document.getElementById('brand-content').style.display = 'block';
			document.getElementById('price-content').style.display = 'block';
		});
	</script>
</Layout>
