---
interface Props {
	name: string;
	model: string;
	price: number;
	salePrice?: number;
	stock: string;
	image: string;
	slug?: string;
}

const { name, model, price, salePrice, stock, image, slug } = Astro.props;
const finalPrice = salePrice || price;
const hasDiscount = salePrice && salePrice < price;
const discountPercent = hasDiscount ? Math.round(((price - salePrice!) / price) * 100) : 0;
---

<div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
	<a href={slug ? `/cart/${slug}` : "#"} class="block">
		<img src={image} alt={name} class="w-full h-64 object-cover" />
		<div class="p-6">
			<h3 class="text-lg font-bold text-gray-900 mb-2">{name}</h3>
			<p class="text-gray-600 text-sm mb-4">{model}</p>
			
			<div class="flex items-center justify-between mb-4">
				<div>
					{salePrice ? (
						<div>
							<span class="text-2xl font-bold text-green-600">${salePrice.toLocaleString()}</span>
							<span class="text-gray-500 line-through ml-2">${price.toLocaleString()}</span>
						</div>
					) : (
						<span class="text-2xl font-bold text-gray-900">${price.toLocaleString()}</span>
					)}
				</div>
				{salePrice && (
					<span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold">
						-{discountPercent}%
					</span>
				)}
			</div>
			
			<p class="text-sm text-gray-600">Stock #{stock}</p>
		</div>
	</a>
</div>

